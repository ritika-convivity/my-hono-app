Run branch=$(git rev-parse --abbrev-ref HEAD)
Current branch: master
 â›…ï¸ wrangler 4.45.0
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–² [WARNING] Warning: Your working directory is a git repo and has uncommitted changes
  To silence this warning, pass in --commit-dirty=true
âœ˜ [ERROR] ENOENT: no such file or directory, scandir '/home/runner/work/my-hono-app/my-hono-app/dist'
If you think this is a bug then please create an issue at https://github.com/cloudflare/workers-sdk/issues/new/choose
? Would you like to report this error to Cloudflare? Wrangler's output and the error details will be shared with the Wrangler team to help us diagnose and fix the issue.
ğŸ¤– Using fallback value in non-interactive context: no
ğŸªµ  Logs were written to "/home/runner/.config/.wrangler/logs/wrangler-2025-10-27_13-08-12_578.log"
Error: Process completed with exit code 1.

name: Deploy Worker

on:
  push:
    branches:
      - master
      - staging
      - dev

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Enable and install pnpm
        run: |
          corepack enable
          pnpm install

      - name: Deploy to the correct environment
        env:
          CLOUDFLARE_API_TOKEN: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          CLOUDFLARE_ACCOUNT_ID: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
        run: |
          branch=$(git rev-parse --abbrev-ref HEAD)
          echo "Current branch: $branch"
          if [[ "$branch" == "master" ]]; then
           pnpm wrangler pages deploy dist --project-name=my-hono-app --branch=master
          elif [[ "$branch" == "staging" ]]; then
            pnpm wrangler pages deploy dist --project-name=my-hono-app --branch=staging
          elif [[ "$branch" == "dev" ]]; then
            pnpm wrangler pages deploy dist --project-name=my-hono-app --branch=dev
          else
            echo "No matching deployment environment."
            exit 1
          fi